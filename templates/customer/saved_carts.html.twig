{% extends 'base.html.twig' %}

{% block title %}
	Saved Carts
{% endblock %}
{% block preStylesheets %}
	{{ encore_entry_link_tags('cart') }}
{% endblock %}
{% block preJavascripts %}
	{{ encore_entry_script_tags('cart') }}
{% endblock %}

{% block body %}
{{ include('common/common_mobile_bar.html.twig',{commonBarText: 'Order Online Or Call Now',commonBarTele: '+1-877-958-1499'}) }}
{{ include('customer/common/top_section.html.twig',
	{ section: { name: 'SAVED SHOPPING CARTS', active: true }})
}}

{{ include("customer/common/customer_details.html.twig") }}

<section class="customer-saved-carts mt-4 mobile-cart-item">
	<div class="container proof-order-container">
		<div class="row">
			<strong class="mb-3">
				{% for savedCart in savedCarts %}
				{% set cart = savedCart.cart %}
				<div class="col-lg-12 mb-4">
					<div class="card fw-normal">
						<div class="card-header">
							<div class="row">
								<div class="col-md-8">
									<div class="w-100">
										<strong>Saved On </strong>: {{ savedCart.createdAt|date("F jS, Y") }}
									</div>
									<div class="w-100">
										<strong>Expires On </strong>: {{ savedCart.getExpiredAt|date("F jS, Y") }}
									</div>
									<div class="w-100">
										<a href="{{ url('cart_resume',{id:savedCart.cart.cartId}) }}" target="_blank" class="text-primary">{{ url('cart_resume',{id:savedCart.cart.cartId}) }}</a>
									</div>
								</div>
								<div class="col-md-4 d-flex align-items-center justify-content-between">
									<div class="card-header-actions">
										<a href="{{ url('cart_resume',{id:savedCart.cart.cartId}) }}" target="_blank" class="btn btn-primary mb-2 resume-order-button">Resume Your Order</a>
									</div>
									<div class="card-header-actions">
										<a href="{{ url('remove_save_cart',{id:savedCart.id}) }}" onclick="return confirm('Are you sure you want to delete this item?');" class="text-primary">Delete</a>
									</div>
								</div>
							</div>
						</div>
						<div class="card-body table-responsive p-2">
                        {% for key,item in cart.cartItems %}
                            {% set template = item.product %}
                            {% set product = template.parent %}
                                
							<table class="table table-bordered">
								<thead>
									<tr>
										<td class="w-50 fw-bold">Product Image</td>
										<td class="w-50 fw-bold">SKU</td>
									</tr>
								</thead>
								<tbody>
									<tr>
										<td style="display: table-cell;">
											<div class="text-center">
													<div class="w-100 design-templates">
														{{ include('cart/partials/_cart_item_preview.html.twig') }}
													</div>
											</div>
										</td>
										<td>
											<b>{{ product.sku }}</b>
											<table class="table mt-2">
												<tbody>
													<tr>
														<td class="p-0">
															<table class="table mb-0 border-ratio">
																<thead>
																	<tr>
																		<th class="p-1 fw-normal">
																			Size
																		</th>
																		<th class="p-1 fw-normal">
																			Qty
																		</th>
																	</tr>
																</thead>
																<tbody>
																	<tr>
																		<th class="fw-normal">
																			{% if item.data.isCustomSize is defined and item.data.isCustomSize %}
																					{{ item.data.customSize.templateSize.width }}x{{ item.data.customSize.templateSize.height }}
																			{% elseif item.data.isWireStake is defined and item.data.isWireStake %}
																				{{ template.name }} Wire Stake
																			{% else %}
																				{{ template.name }}
																			{% endif %}
																		</th>
																		<th class="fw-normal">
																			{{ item.quantity }}
																		</th>
																	</tr>
																</tbody>
															</table>
														</td>
													</tr>
												</tbody>
											</table>
										</td>
									</tr>
								</tbody>
							</table>
                        {% endfor %}

						</div>
					</div>
				</div>
                {% else %}
					{{ include('customer/common/no_items.html.twig') }}
				{% endfor %}
			</div>
		</div>
	</section>

{% endblock %}